# Вступление
Я очень давно пользуюсь яндекс музыкой для поиска новых для меня исполнителей в определённом жанре.
Чаще всего я просто хожу по похожим исполнителям приятных мне групп.
И сколько хожу, столько и хочу посмотреть все эти ссылки в виде графа.
Наконец дошли руки посчитать и посмотреть картину похожих исполнителей в целом. Вот что из этого вышло =)


# Что хотелось
Не раз и не два садился я за этот проект, но каждый раз интерес затухал раньше значимого результата (прямо по книжке).
В этот раз я решил послушаться идеологов хакатонов и постарался напилить минимальный рабочий продукт за минимальное же время.
Остановился на наиболее близких мне жанрах рока и метала, оба они не самые большие - меньше собирать, быстрее считать.


# Как собирал
Сам парсинг написан на питоне и селениуме, поскольку под рукой был готовый проект на этом стеке.
Селениум для продакшена решение конечно спорное (а у нас и не продакшен), зато простое и не злит бот-защиту, а значит отлично отвечает нашим требованиям "сделай быстро и чтоб работало".
Хотелось бы отдельно попросить не ругаться ребят из яндекса на мои паразитные запросы, пусть их было не так много - парни, всё ради науки =)

Для начала я собрал данные по рок исполнителям, их оказалось около шести тысяч.
Когда стал собирать связи стало ясно, что рокеров на самом деле больше, просто только самые популярные представленны в индексе по жанру.
Потрудиться пришлось и над поджанрами рока (русский рок и другие): всего пара первых страниц популярных исполнителей поджанров входит в индекс рока.
В итоге освновные графы представлены в двух вариантах:
- основной, включает в себя всех исполнителей которые отображены в индексе по жанру и его поджанрам
- полный, со всеми исполнителями данного жанра

На середине пути парсинга металла у него появились поджанры, правда на тот момент слабо заполненные. Пришлось собирать всё заново
Отдельно стоит упомянуть о весеннем релизе похожих артистов.
Официальных новостей по этому поводу я не нашёл, но по упавшему количеству рёбер сразу стало видно изменения.
Пришлось пересобрать всю базу, но этого того стоило: ссылок на похожих стало сильно меньше и субъективно они стали релевантнее.

В общем трижды пересобрав БД я понял что всё что мог я сделал, нужно рисовать =))


# Как рисовал
Хотел я наконец отказаться от ручного рисования в пользу gephi, чтоб только ползуночки двигать между "красиво или понятно", но не сраслось.
Небольшие графы на тысячу вершин он мне отлично рисует, а в десять раз больше молча отказывается. Ошибок нет, памяти хватает, у коллег на винде работает, а у меня белый лист =(
Сделал себе зарубку к нему вернуться (и вам рекомендую) и пошёл рисовать привычными средствами.
Поднял довольно старенькое сравнение питонячих либ для распасовки графов и выбрал Igraph с FR алгоритмом (другие я тоже строил, но этот получился нагляднее всего).
Пришлось немного повозиться с настройками внешнего вида и вот что вышло.


# Что получилось
Все графы построены без учёта одиночек - тех артистов, на которых никто не ссылается и которые сами ни на кого не ссылаются.
По моему они только создают шум и не дают никакой дополнительной информации.
Но вы всегда можете поупражняться с ними, исходники в конце я дам =)
В легенде на картинках размеры графа в формате "вершины х рёбра", коэфициент кластеризации и средняя близость вершин.

Начнём с поджанров. Графы небольшие, поэтому строил сразу полные.
- ~~отдельные графы по стилям метала~~
['classicmetal', 'progmetal', 'Numetal', 'epicmetal', 'folkmetal', 'extrememetal'] full
Поджанры металла, как я уже упоминал, на момент сбора только появились, думаю сейчас они значительно выросли.
- ~~отдельные графы по cтилям рока~~
['rusrock', 'ukrrock', 'rock-n-roll', 'prog-rock', 'post-rock', 'new-wave'] full
Заметьте насколько прогрессив и рок-н-ролл опережают своих собратьев.

Основной и полный граф рока со всеми поджанрами.
- ~~граф по основному року (русский рок так далёк)~~
- ~~граф по всему року (плотная каша и неинтересно)~~
[rock-all-primary.png]
[rock-all-full.png]
Как таковая кластеризация меня не интересует, кластеры заранее заданы поджанрами, но насколько они пересекаются посмотреть интересно.
На основном графе отлично виден маленький и гордый кластер русского рока, столь далёкий от остальных =)

Аналогичные графы для металла.
- ~~граф по основному металлу~~
- ~~граф по всему металлу~~
[metal-all-primary.png]
[metal-all-full.png]
Тут исполнителей намного меньше и на первый взгляд нет крупных кластеров.

Наконец начнём пересекать два жанра.
- ~~пересечение метала и рока х 2 (топ9)~~
[summary-full-basic.png]
В таком виде удобно смотреть на взаимосвязи жанров. Красным отмечены рок исполнители, синим - метал, фиолетовым - оба жанра одновременно.
Издалека выглядит конечно интересно, но мы ожидати другого, не так ли?

Изменил размер каждой вершины пропорционально её входящей степени и получил ту картинку, которую можно изучать очень долго.
- ~~размер вершины пропорционален степени~~
[summary-full-weight-preview.png]
Вот теперь можно поизучать.


# Интересное
# TODO-compute
- нарезка внутрянки
- топы по степеням внутри жанров
- топы по степеням вне жанров
- интересные топы по степеням
- интерактивная фиговина?


# Заключение

заключение, просьба фидбека, ссылки на дампы, ссылки на большую общую карту












